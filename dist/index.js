(()=>{"use strict";var e={606:(e,t,i)=>{i.r(t)},187:(e,t,i)=>{i.r(t)},311:(e,t,i)=>{i.r(t)},465:(e,t,i)=>{i.r(t)},581:(e,t,i)=>{i.r(t)},728:(e,t,i)=>{i.r(t)},215:(e,t,i)=>{i.r(t)},565:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i(706)),c=r(i(639)),n=r(i(858));t.default=class{constructor(){this.filteredArr=[],this.cart=new c.default,this.cartItems=this.cart.cartItems,this.productDetails=new a.default(this.cart),this.catalog=new n.default}showProductDetails(e){this.productDetails.drawProduct(e)}createToggle(){this.catalog.addCardViewToggler()}createDropdown(){const e=document.querySelector(".sort-dropdown"),t=document.querySelector(".sort-dropdown-items");e?.addEventListener("click",(()=>{t?.classList.toggle("visible")}))}createCheckFilters(e,t){const i=document.querySelector(`.${t}-filters`);let r=[];"brand"==t&&(r=e.map((e=>e.brand))),"category"==t&&(r=e.map((e=>e.category)));const a=[...new Set(r)];i&&a.forEach((e=>{this.catalog.drawCategory(e,i,t)}))}createPriceFilters(e,t){const i=e.map((e=>e.price)),r={min:Math.min(...i),max:Math.max(...i)};t.price=r,this.catalog.drawSliderFilter(r,"price")}createStockFilters(e,t){const i=e.map((e=>e.stock)),r={min:Math.min(...i),max:Math.max(...i)};t.stock=r,this.catalog.drawSliderFilter(r,"stock")}createDiscountFilters(e,t){const i=e.map((e=>e.discountPercentage)),r={min:Math.round(Math.min(...i)),max:Math.round(Math.max(...i))};t.discount=r,this.catalog.drawSliderFilter(r,"discount")}filterProducts(e,t){this.filteredArr=[],this.filteredArr=e.filter((e=>!(t.categories.length>0)||t.categories.includes(e.category))),this.filteredArr=this.filteredArr.filter((e=>!(t.brands.length>0)||t.brands.includes(e.brand))),this.filteredArr=this.filteredArr.filter((e=>e.price>=t.price.min&&e.price<=t.price.max)),this.filteredArr=this.filteredArr.filter((e=>e.stock>=t.stock.min&&e.stock<=t.stock.max)),this.filteredArr=this.filteredArr.filter((e=>Math.round(e.discountPercentage)>=t.discount.min&&Math.round(e.discountPercentage)<=t.discount.max))}initPagesandFilter(e,t,i){this.filterProducts(e,t);const r=Math.ceil(this.filteredArr.length/6);this.initPages(r),this.createCatalog(this.filteredArr,i,0),this.initSorting()}createCatalog(e,t,i){const r=6*i;let a=this.filteredArr.length>=6?r+6:this.filteredArr.length;if(a>this.filteredArr.length&&(a=this.filteredArr.length),t.innerHTML="",0==e.length)t.innerHTML="<div class='catalog-replacer'>No products found. Please try other filters.</div>";else for(let i=r;i<a;i++)this.catalog.drawCard(e[i],t);const c=document.querySelectorAll(".product-card"),n=document.querySelectorAll(".card-cart");if(n&&c)for(let t=0,i=r;t<n.length;t++,i++)this.cart.initCartAdd(n[t],e[i])}initPages(e){const t=document.querySelector(".catalog-pages");t&&(e<=0?t.style.display="none":(t.style.display="flex",this.createPages(e)))}createSortedCatalog(){const e=document.querySelector(".cards-wrapper");if(e){const t=Math.ceil(this.filteredArr.length/6);this.initPages(t),this.createCatalog(this.filteredArr,e,0)}}initSorting(){const e=document.getElementById("price-asc"),t=document.getElementById("price-des"),i=document.getElementById("rating-asc"),r=document.getElementById("rating-des");e?.addEventListener("click",(()=>{this.filteredArr=this.filteredArr.sort(((e,t)=>e.price>t.price?-1:e.price<t.price?1:0)),this.createSortedCatalog()})),t?.addEventListener("click",(()=>{this.filteredArr=this.filteredArr.sort(((e,t)=>e.price<t.price?-1:e.price>t.price?1:0)),this.createSortedCatalog()})),i?.addEventListener("click",(()=>{this.filteredArr=this.filteredArr.sort(((e,t)=>e.rating>t.rating?-1:e.rating<t.rating?1:0)),this.createSortedCatalog()})),r?.addEventListener("click",(()=>{this.filteredArr=this.filteredArr.sort(((e,t)=>e.rating<t.rating?-1:e.rating>t.rating?1:0)),this.createSortedCatalog()}))}createPages(e){const t=document.querySelector(".pages-wrapper"),i=document.querySelector(".page-next"),r=document.querySelector(".page-prev");t&&(t.innerHTML="");const a=[];for(let i=0;i<e;i++)a.push(document.createElement("p")),a[i].className="catalog__page",a[i].className="page-idx",a[i].textContent=String(i+1),t?.append(a[i]),a[i].addEventListener("click",(()=>{this.goToPage(a,i)}));a[0].classList.add("page-idx--active"),i?.addEventListener("click",(()=>{this.goToPage(a,this.findPageIdx(a)+1)})),r?.addEventListener("click",(()=>{this.goToPage(a,this.findPageIdx(a)-1)}))}goToPage(e,t){const i=document.querySelector(".cards-wrapper");if(t>=0&&t<e.length){for(let t=0;t<e.length;t++)e[t].classList.remove("page-idx--active");e[t].classList.add("page-idx--active"),i&&this.createCatalog(this.filteredArr,i,t)}}findPageIdx(e){for(let t=0;t<e.length;t++)if(e[t].classList.contains("page-idx--active"))return t;return 0}createCart(){this.cart.initPagesandCart()}}},639:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.cartItems=[],this.totalQty=0,this.totalPrice=0,this.promoPc=0,this.totalDiscount=0,this.paginationCount=3}initCartAdd(e,t){const i=document.getElementById(`product-${t.id}`)?.lastChild?.lastChild?.lastChild;this.productInCart(t)&&i?.classList.add("added"),e.addEventListener("click",(()=>{this.productInCart(t)?(this.deleteProduct(t),i?.classList.remove("added")):(this.addToCart(t),i?.classList.add("added"))}))}addToCart(e){if(0===this.cartItems.length)this.cartItems.push({product:e,qty:1});else{let t=!0;for(let i=0;i<this.cartItems.length;i++)this.cartItems[i].product.id==e.id&&(this.cartItems[i].qty++,t=!1);t&&this.cartItems.push({product:e,qty:1})}this.updateHeader()}fillCart(e){const t=e*this.paginationCount;let i=this.cartItems.length>=this.paginationCount?t+this.paginationCount:this.cartItems.length;if(i>this.cartItems.length&&(i=this.cartItems.length),document.querySelector(".cart-items-wrapper").innerHTML="",0==this.cartItems.length){const e=document.querySelector(".cart-wrapper"),t=document.querySelector(".cart-substitute");t&&e&&(t.style.display="block",e.style.display="none",document.querySelector(".cart-substitute__button")?.addEventListener("click",(()=>{window.location.href="#catalog"})))}else for(let e=t;e<i;e++)0==e?this.addItem(this.cartItems[e],e+1,!1):this.addItem(this.cartItems[e],e+1,!0);this.updateCheckout(),document.querySelector(".checkout-button-wrapper")?.addEventListener("click",(()=>{this.openModal()}));const r=document.querySelector(".overlay");r&&r.addEventListener("click",(()=>{document.querySelector(".modal")?.classList.add("hidden"),r.classList.add("hidden")})),document.querySelector(".back-btn")?.addEventListener("click",(()=>{window.location.hash="#catalog"}));const a=document.querySelector(".input-cvv"),c=document.querySelector(".input-expiry");a.addEventListener("input",(()=>{isNaN(Number(a.value))&&(a.value="")})),c.addEventListener("input",(()=>{c.value.match(/\//g)&&(c.value=c.value.slice(0,2)+c.value.slice(3)),+c.value.slice(0,2)>12||+c.value.slice(0,2)<0||+c.value.slice(2)>31||+c.value.slice(2)<0?c.setCustomValidity("Invalid date"):c.setCustomValidity("")})),c.addEventListener("change",(()=>{4==c.value.length&&(c.value=c.value.slice(0,2)+"/"+c.value.slice(2)),(+c.value.slice(0,2)>12||+c.value.slice(0,2)<0)&&(c.value=""),(+c.value.slice(3)>31||+c.value.slice(3)<0)&&(c.value="")}))}updateCart(e){const t=e*this.paginationCount;let i=this.cartItems.length>=this.paginationCount?t+this.paginationCount:this.cartItems.length;if(i>this.cartItems.length&&(i=this.cartItems.length),document.querySelector(".cart-items-wrapper").innerHTML="",0==this.cartItems.length){const e=document.querySelector(".cart-wrapper"),t=document.querySelector(".cart-substitute");t&&e&&(t.style.display="block",e.style.display="none",document.querySelector(".cart-substitute__button")?.addEventListener("click",(()=>{window.location.href="#catalog"})))}else for(let e=t;e<i;e++)0==e?this.addItem(this.cartItems[e],e+1,!1):this.addItem(this.cartItems[e],e+1,!0);this.updateCheckout()}addItem(e,t,i){const r=document.querySelector(".cart-items-wrapper"),a=document.createElement("div"),c=document.createElement("div"),n=document.createElement("div"),s=document.createElement("p"),o=document.createElement("div"),l=document.createElement("p"),d=document.createElement("div"),u=document.createElement("button"),m=document.createElement("input"),h=document.createElement("button"),p=document.createElement("p"),g=document.createElement("p");if(a.classList.add("cart__item"),a.id=`cartItemId${e.product.id}`,c.classList.add("cart__item-num"),n.classList.add("cart__item-img"),s.classList.add("cart__item-name"),o.classList.add("cart__item-details"),l.classList.add("cart__item-price"),d.classList.add("cart__item-qty"),u.classList.add("button"),u.classList.add("btn-minus"),m.classList.add("amount"),h.classList.add("button"),h.classList.add("btn-plus"),p.classList.add("cart__item-total"),g.classList.add("cart__item-del"),r?.append(a),d.append(u,m,h),a.append(c,n,s,o,l,d,p,g),i){const t=document.createElement("hr");t.classList.add("split-line"),t.id=`breakLine${e.product.id}`,a?.before(t)}c.innerHTML=String(t),n.style.backgroundImage=`url(${e.product.thumbnail})`,s.innerHTML=e.product.title,o.innerHTML=e.product.description,l.innerHTML=`$${e.product.price}`,u.innerHTML="−",h.innerHTML="+",m.value=String(e.qty),p.innerHTML="$"+e.product.price*e.qty,g.innerHTML="&#9587;",this.makeInteractible(u,m,h,g,p,e)}makeInteractible(e,t,i,r,a,c){e.addEventListener("click",(()=>{t.value=String(+t.value-1),+t.value<=0?this.deleteItem(c):(a.innerHTML="$"+ +t.value*c.product.price,c.qty=Number(t.value)),this.updateHeader(),this.updateCheckout()})),t.addEventListener("change",(()=>{+t.value<=0?this.deleteItem(c):(+t.value>c.product.stock&&(t.value=String(c.product.stock)),a.innerHTML="$"+ +t.value*c.product.price,c.qty=Number(t.value)),this.updateHeader(),this.updateCheckout()})),i.addEventListener("click",(()=>{t.value=String(+t.value+1),+t.value>c.product.stock&&(t.value=String(c.product.stock)),a.innerHTML="$"+ +t.value*c.product.price,c.qty=Number(t.value),this.updateHeader(),this.updateCheckout()})),r.addEventListener("click",(()=>{this.deleteItem(c),this.updateHeader(),this.updateCheckout()}))}deleteItem(e){const t=document.getElementById(`cartItemId${e.product.id}`),i=document.getElementById(`breakLine${e.product.id}`),r=this.findPage();if(this.cartItems.splice(this.cartItems.indexOf(e),1),t?.remove(),i?.remove(),this.updateHeader(),this.updateCheckout(),console.log(r),void 0!==r&&this.updatePages(r),0==this.cartItems.length){const e=document.querySelector(".cart-wrapper"),t=document.querySelector(".cart-substitute");t&&e&&(t.style.display="block",e.style.display="none",document.querySelector(".cart-substitute__button")?.addEventListener("click",(()=>{window.location.href="#catalog"})))}}deleteProduct(e){for(let t=0;t<this.cartItems.length;t++)if(this.cartItems[t].product.id==e.id){this.cartItems.splice(t,1);break}this.updateHeader()}updatePages(e){const t=Math.ceil(this.cartItems.length/this.paginationCount);if(console.log(e,t),e>=t){this.initPages(t,t-1);const e=[...document.querySelectorAll(".page-idx")];this.goToPage(e,t-1)}else{this.initPages(t,e);const i=[...document.querySelectorAll(".page-idx")];this.goToPage(i,e)}}findPage(){const e=document.querySelectorAll(".cart__item")[0].id.replace("cartItemId","");let t;for(let i=0;i<this.cartItems.length;i++)this.cartItems[i].product.id==+e&&(t=Math.floor(i/this.paginationCount));return t}updateHeader(){const e=document.querySelector(".shopping-cart__price"),t=document.querySelector(".shopping-cart__count");this.totalQty=this.cartItems.reduce(((e,t)=>e+t.qty),0),this.totalPrice=this.cartItems.reduce(((e,t)=>e+t.product.price*t.qty),0),this.totalDiscount=this.cartItems.reduce(((e,t)=>e+t.product.discountPercentage),0),t.innerHTML=String(this.cartItems.length),e.innerHTML=`$${this.totalPrice}`}updateCheckout(){const e=document.querySelector(".amount-subtotal"),t=document.querySelector(".amount-discount"),i=document.querySelector(".amount-total"),r=document.querySelector(".amount-checkout");e&&(e.innerHTML=`$${this.totalPrice}`),this.updatePromo(0),t&&i&&r&&(this.totalDiscount=this.cartItems.reduce(((e,t)=>e+Math.round(t.product.price*t.qty*t.product.discountPercentage/100)),0),t.innerHTML=`-$${this.totalDiscount}`,i.innerHTML=r.innerHTML="$"+(this.totalPrice-this.totalDiscount-this.totalPrice*this.promoPc/100))}updatePromo(e){this.promoPc=e;const t=document.querySelector(".title-promo-amount"),i=document.querySelector(".amount-promo");t&&i&&(t.innerHTML=this.promoPc?`${this.promoPc}%`:"0",i.innerHTML=this.promoPc?"$"+this.totalPrice*this.promoPc/100:"")}openModal(){const e=document.querySelector(".modal"),t=document.querySelector(".overlay");if(e&&t){e.classList.remove("hidden"),t.classList.remove("hidden");const i=document.querySelector(".modal-button");i&&(i.innerHTML="Complete payment — $"+(this.totalPrice-this.totalDiscount-this.totalPrice*this.promoPc/100),i.addEventListener("click",(()=>{this.showMessage(this.validateForm())})))}}productInCart(e){for(let t=0;t<this.cartItems.length;t++)if(this.cartItems[t].product.id===e.id)return!0;return!1}validateForm(){let e=!0;const t=document.querySelector(".input-first-name"),i=document.querySelector(".input-last-name"),r=document.querySelector(".input-phone"),a=document.querySelector(".input-address"),c=document.querySelector(".input-email"),n=document.querySelector(".input-card-num"),s=document.querySelector(".input-cvv"),o=document.querySelector(".input-expiry");return t&&i&&(t.value.length<3||i.value.length<3)&&(e=!1),r&&(r.value.match(/\+\d{9}/g)||(console.log("inputPhone"),e=!1)),a&&(a.value.match(/^(\b[A-Za-z]{3,}\s+[A-Za-z]{3,}\s+[A-Za-z]{3,}\b)$/g)||(console.log("inputAddress"),e=!1)),c&&(c.value.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)||(e=!1,console.log("inputEmail"))),n&&(n.value.match(/^\d{16}$/g)||(e=!1,console.log("inputCardNum"))),s&&(s.value.match(/^\d{3}$/g)||(console.log("inputCVV"),e=!1)),o&&(o.value.match(/^\d{4}$|^\d{2}\/\d{2}$/g)||(console.log("inputExpiry"),e=!1)),e}showMessage(e){const t=document.createElement("div"),i=document.createElement("p"),r=document.createElement("button");t.classList.add("modal-warning"),i.classList.add("modal-warning__text"),r.classList.add("button"),t.append(i,r),document.querySelector(".main-wrapper")?.append(t),e?(r.remove(),i.innerHTML="The order was successfully completed!\nRedirecting...",setTimeout((()=>{window.location.hash="#catalog"}),5e3)):(i.innerHTML="Please check the validity of all areas!",r.innerHTML="Back to checkout"),r.addEventListener("click",(()=>{t.remove()}))}initPagesandCart(){this.paginationCount=3;const e=document.querySelector(".pagination-count-wrapper"),t=document.querySelector(".pagination-visible--active"),i=document.querySelector(".pagination-invisible");e?.addEventListener("click",(()=>{i?.classList.toggle("show")}));const r=document.querySelectorAll(".pagination-inactive");t&&r.forEach((e=>{e.addEventListener("click",(()=>{this.paginationCount=Number(e.textContent),t.textContent=e.textContent;const i=Math.ceil(this.cartItems.length/this.paginationCount);this.initPages(i,0),this.fillCart(0)}))}));const a=Math.ceil(this.cartItems.length/this.paginationCount);this.initPages(a,0),this.fillCart(0)}initPages(e,t){const i=document.querySelector(".cart-pages");i&&(e<=1?i.style.display="none":(i.style.display="flex",this.createPages(e,t)))}createPages(e,t){const i=document.querySelector(".pages-wrapper"),r=document.querySelector(".page-next"),a=document.querySelector(".page-prev");i&&(i.innerHTML="");const c=[];for(let t=0;t<e;t++)c.push(document.createElement("p")),c[t].className="catalog__page",c[t].className="page-idx",c[t].textContent=String(t+1),i?.append(c[t]),c[t].addEventListener("click",(()=>{this.goToPage(c,t)}));c[t].classList.add("page-idx--active"),r?.addEventListener("click",(()=>{this.goToPage(c,this.findPageIdx(c)+1)})),a?.addEventListener("click",(()=>{this.goToPage(c,this.findPageIdx(c)-1)}))}goToPage(e,t){const i=document.querySelector(".cart-items-wrapper");if(t>=0&&t<e.length){for(let t=0;t<e.length;t++)e[t].classList.remove("page-idx--active");e[t].classList.add("page-idx--active"),i&&this.updateCart(t)}}findPageIdx(e){for(let t=0;t<e.length;t++)if(e[t].classList.contains("page-idx--active"))return t;return 0}}},858:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(770);t.default=class{drawCategory(e,t,i){const a=document.createElement("label"),c=document.createElement("input"),n=document.createElement("span");a.className=`checkbox__item ${i}__item`,c.className=`checkbox__item-input ${i}__item-input`,n.className="checkmark","category"==i?(console.log("capitalized"),a.textContent=(0,r.capitalizeExpr)(e)):a.textContent=e,c.setAttribute("type","checkbox"),c.setAttribute("name",i),c.value=e,a.append(c),a.append(n),t.append(a)}drawCard(e,t){const i=document.createElement("div"),r=document.createElement("a"),a=document.createElement("img"),c=document.createElement("div"),n=document.createElement("h4"),s=document.createElement("h4"),o=document.createElement("p"),l=document.createElement("div"),d=document.createElement("div"),u=document.createElement("div"),m=document.createElement("div"),h=document.createElement("p"),p=document.createElement("div"),g=document.createElement("img");i.className="product-card",r.href=`#product-details/${e.id}`,i.id=`product-${e.id}`,a.className="card-image",c.className="card-txt-wrapper",n.className="card-price",s.className="card-title",o.className="card-description",r.className="product-card__link",l.className="card-top-wrapper",d.className="card-bottom-wrapper",u.className="card-rating",m.className="card-rating-star",h.className="card-rating-txt",p.className="card-cart",g.className="card-cart-img",a.src=e.thumbnail,n.textContent=`$${e.price.toString()}`,s.textContent=e.title,o.textContent=e.description,g.src="./assets/icons/add-to-cart-icon.svg",r.innerHTML="More",h.textContent=e.rating.toString(),i.append(a),i.append(c),c.append(l),c.append(s),c.append(o),c.append(d),l.append(n,r),d.append(u,p),u.append(m),u.append(h),p.append(g),t.append(i)}drawSliderFilter(e,t){const i=document.querySelector(`.${t}-min`),r=document.querySelector(`.${t}-max`);i&&r&&(i.value=e.min.toString(),r.value=e.max.toString()),this.drawSliderInput(e,t)}drawSliderInput(e,t){const i=document.querySelector(`.${t}-range-wrapper`),r=i?.querySelector(".range-min"),a=i?.querySelector(".range-max"),c=document.querySelector(`.${t}-min`),n=document.querySelector(`.${t}-max`),s=i?.querySelector(".slider-track");r.max=String(e.max),a.max=String(e.max),r.min=String(e.min),a.min=String(e.min),r.value=r.min,a.value=a.max,this.calcSliderInput(r,a,c,n,s,!0)}calcSliderInput(e,t,i,r,a,c){const n=e.max;+t.value-+e.value<=0&&(e.value=String(+t.value-0)),c&&(i.value=e.value),a.style.background=this.fillSliderTrack(e,t,n),+t.value-+e.value<=0&&(t.value=String(+t.value+0)),c&&(r.value=t.value),a.style.background=this.fillSliderTrack(e,t,n)}fillSliderTrack(e,t,i){const r=Math.round(100/(+t.max-+e.min)),a=(+e.value-+e.min)*r,c=(+t.value-+e.min)*r;return`Linear-Gradient(To Right, #Dadae5 ${a}% , #8e2de2 ${a}% , #8e2de2 ${c}%, #Dadae5 ${c}%)`}addCardViewToggler(){const e=document.querySelector(".display-icon"),t=document.querySelector(".cards-wrapper");e&&t&&e.addEventListener("click",(()=>{e.classList.contains("list")?(e.classList.remove("list"),t.classList.remove("list")):(e.classList.add("list"),t.classList.add("list"))}))}}},706:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(770);t.default=class{constructor(e){this.cart=e}drawProduct(e){this.drawCrumbs(e),this.drawProductDescr(e),this.drawProductImgs(e)}drawCrumbs(e){const t=document.querySelectorAll(".crumb");t[1].innerHTML=(0,r.capitalizeExpr)(e.category),t[2].innerHTML=(0,r.capitalizeExpr)(e.brand),t[3].innerHTML=e.title}drawProductDescr(e){const t=document.querySelector(".product-brand"),i=document.querySelector(".product-category"),a=document.querySelector(".product-title"),c=document.querySelector(".sale"),n=document.querySelectorAll(".rating-star"),s=document.querySelector(".rating-txt"),o=document.querySelector(".product-description"),l=document.querySelector(".product-stock-q");t&&i&&(t.innerHTML=(0,r.capitalizeExpr)(e.brand),i.innerHTML=(0,r.capitalizeExpr)(e.category)),a&&o&&l&&(a.innerHTML=e.title,o.innerHTML=e.description,l.innerHTML=String(e.stock)),c&&(c.innerHTML=`${Math.round(e.discountPercentage)}% OFF`),s&&(s.innerHTML=String(e.rating)),(0,r.createRating)(n,e.rating),this.initButtons(e)}drawProductImgs(e){const t=document.querySelector(".product-img"),i=e.images,r=[];for(let e=0;e<i.length;e++)i[e].includes("thumbnail")||(r.push(document.createElement("div")),r[e].classList.add("product-thumb"),document.querySelector(".product-img-wrapper")?.append(r[e]));r[0].classList.add("thumb--active"),t.addEventListener("mouseenter",(()=>{this.createMagnifyerDiv()})),t.addEventListener("mousemove",(e=>{this.magnifyImage(e)})),t.addEventListener("mouseleave",(()=>{this.removeMagnify()}));for(let t=0;t<r.length;t++)r[t].style.backgroundImage=`url(${e.images[t]})`;this.selectImage(i,r,t)}selectImage(e,t,i){for(let r=0;r<t.length;r++)t[r].classList.contains("thumb--active")&&(i.style.backgroundImage=`url(${e[r]})`),t[r].addEventListener("click",(()=>{t.forEach((e=>{e.classList.remove("thumb--active")})),t[r].classList.add("thumb--active"),i.style.backgroundImage=`url(${e[r]})`}))}createMagnifyerDiv(){const e=document.createElement("div");e.classList.add("modal-prodDetails"),document.body.append(e)}magnifyImage(e){const t=document.querySelector(".modal-prodDetails");if(t){const i=document.querySelector(".product-img");t.style.backgroundImage=i.style.backgroundImage,t.style.backgroundPositionX=(e.pageX-i.offsetLeft)/i.offsetWidth*100+"%",t.style.backgroundPositionY=(e.pageY-i.offsetTop)/i.offsetHeight*100+"%"}}removeMagnify(){document.querySelector(".modal-prodDetails")?.remove()}initButtons(e){const t=document.querySelector(".button-add"),i=document.querySelector(".button-buy-now"),r=document.querySelector(".to-cart"),a=document.querySelector(".to-catalog");if(t)for(let i=0;i<this.cart.cartItems.length;i++)this.cart.cartItems[i].product.id==e.id&&(t.classList.add("added"),t.innerHTML="Added");t?.addEventListener("click",(()=>{t.classList.contains("added")?(t.classList.remove("added"),t.innerHTML="Add to cart",this.cart.deleteProduct(e)):(t.classList.add("added"),t.innerHTML="Added",console.log("added to cart"),this.cart.addToCart(e),console.log(this.cart.cartItems))})),i?.addEventListener("click",(()=>{this.cart.addToCart(e),console.log(this.cart.cartItems),window.location.href="#cart",setTimeout((()=>{document.querySelector(".cart")&&this.cart.fillCart(0),this.cart.openModal()}),50)})),r?.addEventListener("click",(()=>{window.location.href="#cart"})),a?.addEventListener("click",(()=>{window.location.href="#catalog"}))}}},717:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i(649)),c=r(i(300));t.default=class{constructor(){this.router=new c.default([new a.default("catalog","catalog.html",!0),new a.default("cart","cart.html"),new a.default("404","404.html")])}start(){this.router.initRoutes(),this.router.startRouter()}}},617:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i(842)),c=r(i(565)),n=r(i(649)),s=i(351);t.default=class{constructor(){this.cache=[],this.controller=new a.default,this.view=new c.default,this.filtersObj={categories:[],brands:[],price:{min:0,max:0},stock:{min:0,max:0},discount:{min:0,max:0}}}getData(e,t){this.controller.getProducts((i=>{void 0!==i&&(this.cache=[...i.products],this.loadCardRoutes(e,i.products),t())}))}loadCardRoutes(e,t){for(let i=0;i<t.length;i++)e.push(new n.default(`product-details/${t[i].id}`,"product-details.html"))}initCatalog(){const e=document.querySelector(".cards-wrapper"),t=this.cache;void 0!==t&&e&&(e.innerHTML="",this.view.initPagesandFilter(t,this.filtersObj,e),this.view.createToggle(),this.view.createDropdown())}initCart(){document.querySelector(".cart")&&this.view.createCart()}initProductDetails(){const e=window.location.hash.split("/"),t=document.querySelector(".product-wrapper");this.controller.getProductDetails((e=>{void 0!==e&&t&&this.view.showProductDetails(e)}),{id:Number(e[e.length-1])})}initFilters(){const e=this.cache,t=document.querySelector(".filters-wrapper");void 0!==e&&t&&(this.view.createCheckFilters(e,"brand"),this.view.createCheckFilters(e,"category"),this.view.createPriceFilters(e,this.filtersObj),this.view.createStockFilters(e,this.filtersObj),this.view.createDiscountFilters(e,this.filtersObj),this.filtersCheckListener(e),this.filtersRangeListener(e))}changeCheckboxes(e,t,i){const r=e[t],a=i;if(r.checked)a.push(r.value);else{const e=a.indexOf(r.value);a.splice(e,1)}}filtersCheckListener(e){const t=document.getElementsByName("category"),i=document.querySelectorAll(".category__item"),r=document.getElementsByName("brand"),a=document.querySelectorAll(".brand__item");i.forEach(((e,i)=>{e.addEventListener("input",(()=>{this.changeCheckboxes(t,i,this.filtersObj[s.Types.FilterName.CATEGORIES]),this.initCatalog(),console.log("this.filtersObj: ",this.filtersObj)}))})),a.forEach(((e,t)=>{e.addEventListener("input",(()=>{this.changeCheckboxes(r,t,this.filtersObj[s.Types.FilterName.BRANDS]),this.initCatalog(),console.log("this.filtersObj: ",this.filtersObj)}))}))}filtersRangeListener(e){this.addFilterRangeListener("price",e,this.filtersObj.price),this.addFilterRangeListener("stock",e,this.filtersObj.stock),this.addFilterRangeListener("discount",e,this.filtersObj.discount)}addFilterRangeListener(e,t,i){const r=document.querySelector(`.${e}-range-wrapper`),a=r?.querySelector(".range-min"),c=r?.querySelector(".range-max"),n=document.querySelector(`.${e}-min`),s=document.querySelector(`.${e}-max`),o=r?.querySelector(".slider-track");a.addEventListener("input",(()=>{i.min=+a.value,i.max=+c.value,setTimeout((()=>{this.initCatalog()}),300),this.view.catalog.calcSliderInput(a,c,n,s,o,!0)})),c.addEventListener("input",(()=>{i.min=+a.value,i.max=+c.value,setTimeout((()=>{this.initCatalog()}),300),this.view.catalog.calcSliderInput(a,c,n,s,o,!0)})),n.addEventListener("input",(()=>{a.value=n.value,""==n.value&&(a.value=a.min),i.min=+n.value,i.max=+n.value,setTimeout((()=>{this.initCatalog()}),300),this.view.catalog.calcSliderInput(a,c,n,s,o,!1)})),n.addEventListener("input",(()=>{c.value=n.value,""==s.value&&(c.value=c.max),i.min=+n.value,i.max=+n.value,setTimeout((()=>{this.initCatalog()}),300),this.view.catalog.calcSliderInput(a,c,n,s,o,!1)}))}}},853:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i(24));class c extends a.default{constructor(){super("https://dummyjson.com/products")}}t.default=c},842:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i(853)),c=i(351);class n extends a.default{getProducts(e,t={}){super.getResp(e,t)}getProductDetails(e,t={}){super.getResp(e,t)}getCategories(e){super.getResp(e,{endpoint:c.Types.Endpoint.CATEGORIES})}}t.default=n},24:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(351);t.default=class{constructor(e){this.baseLink=e}getResp(e=(()=>{console.error("No callback for GET response")}),t){this.load(e,t)}makeUrl(e){return 0!==Object.keys(e).length?e.endpoint===r.Types.Endpoint.CATEGORIES?`${this.baseLink}/categories`:`${this.baseLink}/${e.id}`:`${this.baseLink}?limit=100&loading=lazy`}load(e,t){fetch(this.makeUrl(t)).then((e=>e.json())).then((t=>e(t))).catch((e=>console.error(e)))}}},770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createRating=t.capitalizeExpr=void 0,t.capitalizeExpr=function(e){return e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")},t.createRating=function(e,t){for(let i=0;i<Math.round(t);i++)e[i].classList.add("checked")}},710:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),i(606),i(187),i(311),i(465),i(581),i(728),i(215)},649:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i=!1){this.name=e,this.htmlName=t,this.default=i}isActiveRoute(e){return e.replace("#","")===this.name}}},300:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i(617));t.default=class{constructor(e){this.routes=e,this.init=new a.default,this.rootElem=document.getElementById("app")}initRoutes(){this.init.getData(this.routes,(()=>{this.initPaths()}))}startRouter(){window.addEventListener("hashchange",(()=>{this.initPaths()}))}initPaths(){"#cart"==window.location.hash&&this.hasChanged(this.routes,(()=>{this.init.initCart()})),"#catalog"!=window.location.hash&&""!=window.location.hash||this.hasChanged(this.routes,(()=>{this.init.initFilters(),this.init.initCatalog()})),window.location.hash.match(/^(\#product-details\/(100|[1-9][0-9]?))$/g)&&this.hasChanged(this.routes,(()=>{this.init.initProductDetails()}))}hasChanged(e,t){if(window.location.hash.length>0)for(let i=0,r=e.length;i<r;i+=1){const r=e[i];r.isActiveRoute(window.location.hash.substring(1))&&this.goToRoute(r.htmlName,t)}else for(let i=0,r=e.length;i<r;i+=1){const r=e[i];r.default&&this.goToRoute(r.htmlName,t)}}async goToRoute(e,t){const i=`components/views/${e}`,r=await fetch(i).then((e=>e.text()));console.log("routed"),this.rootElem.innerHTML=r,t()}checkValidity(e){return this.routes.find((t=>t.htmlName==e))}}},351:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Types=void 0,function(e){let t,i;!function(e){e.CATEGORIES="categories",e.BRANDS="brands"}(t=e.FilterName||(e.FilterName={})),function(e){e.CATEGORIES="categories",e.CATEGORY="category"}(i=e.Endpoint||(e.Endpoint={}))}(t.Types||(t.Types={}))},607:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i(717));i(710),(new a.default).start()}},t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var c=t[r]={exports:{}};return e[r].call(c.exports,c,c.exports,i),c.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(607)})();